<!-- Encabezado de la página -->
<header [class.black]="isShrunk" #headerRef>
  <!--Logo de la página-->
  <img src="Delicato_Logo.png" alt="Delicato Logo" />
  <!-- Barra de navegación -->
  <nav>
    <ul>
      <li><a href="#Inicio">Inicio</a></li>
      <li><a href="#Nosotros">Nosotros</a></li>
      <li><a href="#Menu">Menú</a></li>
      <li><a href="#Reserva">Reserva</a></li>
      <li *ngIf="!isAuthenticated">
        <a href="#" data-bs-toggle="modal" data-bs-target="#login">login</a>
      </li>
      <li *ngIf="!isAuthenticated">
        <a href="#" data-bs-toggle="modal" data-bs-target="#Registro">Registro</a>
      </li>
      <li *ngIf="isAuthenticated">
        <a href="#" (click)="logout()">Cerrar sesión</a>
      </li>
      <li>
        <a href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasContacto"
          aria-controls="offcanvasContacto">Contacto</a>
      </li>
    </ul>
  </nav>
</header>

<!-- Modal login -->
<div class="modal fade" id="login" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Login</h1>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="login()" #loginForm="ngForm">
          <label for="email">Email:</label>
          <input [(ngModel)]="email" name="email" type="email" id="login-email" class="form-control mb-3 bg-white"
            placeholder="Email" required />

          <label for="password">Password:</label>
          <input [(ngModel)]="password" name="password" type="password" id="login-password"
            class="form-control mb-3 bg-white" placeholder="*******" required />
          <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal Registro -->
<div class="modal fade" id="Registro" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Registro</h1>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="register()" #loginForm="ngForm">
          <label for="email">Email:</label>
          <input [(ngModel)]="email" name="email" type="email" id="login-email" class="form-control mb-3 bg-white"
            placeholder="Email" required />

          <label for="password">Password:</label>
          <input [(ngModel)]="password" name="password" type="password" id="login-password"
            class="form-control mb-3 bg-white" placeholder="*******" required />
          <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Imagen de inicio principal -->
<div id="Inicio" class="Inicio">
  <!-- Div para centrar el texto -->
  <div class="InicioTexto">
    <h1>DELICATO</h1>
    <h2>Restaurante</h2>
  </div>
</div>

<!-- Sección de Nosotros -->
<div id="Nosotros" class="SobreNosotros">
  <!-- Divisor de MICHELIN -->
  <div class="AtmosferaDivider">
    <div class="AtmosferaTexto">
      <h2>Atmósfera Fascinante</h2>
      <p>
        El Restaurante Delicato es ideal para sus momentos más importantes, para
        una cena romántica o para un almuerzo familiar.
      </p>
    </div>
    <a href="https://guide.michelin.com/it/it/lazio/contigliano_1843189/ristorante/delicato" target="_blank"><img
        src="MICHELIN-2025_Selected_E-label_Logo.png" alt="Estrella MICHELIN" /></a>
  </div>

  <!-- Sección de gastronomía autentica -->
  <div class="GastronomiaAutentica">
    <div class="GastronomiaAutenticaTitleContainer">
      <div class="GastronomiaAutenticaTitulo">
        <h2>Gastronomía autentica</h2>
      </div>
    </div>
    <div class="GastronomiaAutenticaDescripcionContainer">
      <div class="GastronomiaAutenticaDescripcion">
        <p>
          Un auténtico proyecto gastronómico, una cocina básica sostenible que
          nace del amor por nuestro territorio, ingredientes tradicionales
          procesados con maestría a través de técnicas de cocina contemporáneas.
          Cocina de proximidad y memoria gastronómica, sin excesos estilísticos.
        </p>
      </div>
    </div>
  </div>

  <!-- Sección de la galería del interior del restaurante -->
  <div class="galeria-interior-container">
    <h1>Nuestro Interior</h1>
    <div class="lineaBlanca"></div>
    <section class="galeria-interior">
      <div class="galeria-scroll">
        <img src="delicato1.jpeg" alt="Imagen 1">
        <img src="delicato10.jpg" alt="Imagen 10">
        <img src="delicato4.jpg" alt="Imagen 4">
        <img src="delicato3.jpeg" alt="Imagen 3">
        <img src="delicato5.jpeg" alt="Imagen 5">
        <img src="delicato17.jpg" alt="Imagen 17">
        <img src="delicato7.jpg" alt="Imagen 7">
        <img src="delicato8.jpg" alt="Imagen 8">
        <img src="delicato9.jpg" alt="Imagen 9">
      </div>
    </section>
    <section class="galeria-interior">
      <div class="galeria-scroll">
        <img src="delicato10.jpg" alt="Imagen 10">
        <img src="delicato2.jpg" alt="Imagen 2">
        <img src="delicato12.jpg" alt="Imagen 12">
        <img src="delicato13.jpg" alt="Imagen 13">
        <img src="delicato14.jpg" alt="Imagen 14">
        <img src="delicato15.jpg" alt="Imagen 15">
        <img src="delicato16.jpg" alt="Imagen 16">
        <img src="delicato6.jpg" alt="Imagen 6">
        <img src="delicato18.jpg" alt="Imagen 18">
      </div>
    </section>
    <div class="lineaBlanca"></div>
  </div>
</div>

<!-- Sección de Carrusel-->
<div class="Menu" id="Menu">
  <h1 class="Menu-titulo">Nuestros Platos</h1>
  <div class="linea"></div>

  <!-- Contenedor del Carrusel -->
  <div class="contenedor-carrusel">
    <button id="prevBtn">❮</button>
    <div id="carrusel" class="carrusel">
      <div class="item"><img src="menu-carrusel1.jpg" alt="Plato 1" /></div>
      <div class="item"><img src="menu-carrusel2.jpg" alt="Plato 2" /></div>
      <div class="item"><img src="menu-carrusel3.jpg" alt="Plato 3" /></div>
      <div class="item"><img src="menu-carrusel4.jpg" alt="Plato 4" /></div>
      <div class="item"><img src="menu-carrusel5.jpg" alt="Plato 5" /></div>
      <div class="item"><img src="menu-carrusel6.jpg" alt="Plato 6" /></div>
    </div>
    <button id="nextBtn">❯</button>
  </div>

  <!-- Indicadores (dots) -->
  <div id="dots" class="dots-container"></div>
  <div class="linea"></div>
</div>

<div class="instagram-section">
  <h1 class="Menu-titulo">¡Nuestros mejores momentos!</h1>
  <div class="linea"></div>

  <section class="instagram-gallery">
    <div class="column vertical-loop">
      <div class="iframe-wrapper">
        <iframe src="https://www.instagram.com/p/DKKbbm6o58U/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DDWokl5M54y/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DJ8sr-NBWeL/embed" frameborder="0" scrolling="no"></iframe>
        <!-- Duplicados para loop infinito -->
        <iframe src="https://www.instagram.com/p/DKKbbm6o58U/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DDWokl5M54y/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DJ8sr-NBWeL/embed" frameborder="0" scrolling="no"></iframe>
      </div>
    </div>

    <div class="column vertical-loop down">
      <div class="iframe-wrapper">
        <iframe src="https://www.instagram.com/p/DJqwkrMMzqI/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DJCF209MO3b/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DH-hmTzP_t7/embed" frameborder="0" scrolling="no"></iframe>
        <!-- Duplicados para loop infinito -->
        <iframe src="https://www.instagram.com/p/DJqwkrMMzqI/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DJCF209MO3b/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DH-hmTzP_t7/embed" frameborder="0" scrolling="no"></iframe>
      </div>
    </div>

    <div class="column vertical-loop">
      <div class="iframe-wrapper">
        <iframe src="https://www.instagram.com/p/DEpSJM0sPvr/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DEFGxulMUKy/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DDHTpzBsJb6/embed" frameborder="0" scrolling="no"></iframe>
        <!-- Duplicados para loop infinito -->
        <iframe src="https://www.instagram.com/p/DEpSJM0sPvr/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DEFGxulMUKy/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DDHTpzBsJb6/embed" frameborder="0" scrolling="no"></iframe>
      </div>
    </div>

    <div class="column vertical-loop down">
      <div class="iframe-wrapper">
        <iframe src="https://www.instagram.com/p/DKgua9gMkdL/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/C_sPSilI_ZC/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DEPhNHSsQXW/embed" frameborder="0" scrolling="no"></iframe>
        <!-- Duplicados para loop infinito -->
        <iframe src="https://www.instagram.com/p/DKgua9gMkdL/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/C_sPSilI_ZC/embed" frameborder="0" scrolling="no"></iframe>
        <iframe src="https://www.instagram.com/p/DEPhNHSsQXW/embed" frameborder="0" scrolling="no"></iframe>
      </div>
    </div>
  </section>
  <div class="linea"></div>
</div>

<div class="review-section">
  <div *ngIf="isAuthenticated; else loginMessage" class="review-form">
    <h3>Escribe una reseña</h3>
    <textarea [(ngModel)]="reviewText" rows="4" cols="50"></textarea>

    <div class="form-group">
      <label for="rating">Calificación:</label>
      <select id="rating" [(ngModel)]="rating" class="form-control">
        <option [value]="5">⭐⭐⭐⭐⭐</option>
        <option [value]="4">⭐⭐⭐⭐</option>
        <option [value]="3">⭐⭐⭐</option>
        <option [value]="2">⭐⭐</option>
        <option [value]="1">⭐</option>
      </select>
    </div>

    <button (click)="submitReview()">Publicar reseña</button>
  </div>

  <ng-template #loginMessage>
    <p class="login-msg">Inicia sesión para dejar una reseña.</p>
  </ng-template>

  <h3 class="review-title">Reseñas</h3>
  <div class="carousel-container " (wheel)="scrollHorizontal($event)">
    <div class="carousel-wrapper">
      <div class="review-card" *ngFor="let review of reviews">
        <p><strong>{{ review.userEmail }}</strong></p>
        <p>{{ review.content }}</p>
        <div class="stars">
          <span *ngFor="let star of getStarArray(review.rating)">★</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección de reserva -->
  <div id="Reserva" class="Reserva">
    <div class="ReservaCardContainer">
      <div class="ReservaCardContentContainer">
        <!-- Inicio de la reserva -->
        <h1>DELICATO</h1>
        <h3>Reserva con Nosotros</h3>

        <!-- Formulario para la reserva -->
        <form>
          <label for="nombre">Nombre</label>
          <input type="text" class="form-control form-control-sm" id="nombre" />

          <label for="email">Correo</label>
          <input type="email" class="form-control form-control-sm" id="email" />

          <label for="telefono">Teléfono</label>
          <input type="tel" class="form-control form-control-sm" id="telefono" />

          <div class="GrupoBotonesTipoCena">
            <div class="slider slider-oscuro left" id="sliderToggle"></div>
            <button id="btn-almuerzo" class="active" (click)="seleccionarTipo('almuerzo')">Almuerzo</button>
            <button id="btn-cena" (click)="seleccionarTipo('cena')">Cena</button>
          </div>

          <!-- Div para acomodar la reserva de la fecha -->
          <div class="calendarioDropdown">
            <div class="dropdownContainer">
              <!-- Dropdown de Personas -->
              <div class="personas-dropdown">
                <div class="personas-dropdown-container">
                  <button class="personas-dropdown-button" (click)="toggleDropdown('personas')">
                    <i class="fas fa-users"></i>
                    <span class="arrow">&#9660;</span>
                  </button>
                  <input type="text" class="personas-dropdown-input" placeholder="Personas"
                    [(ngModel)]="cantidadPersonas" name="personas" (blur)="validarCantidadPersonas()">
                </div>
                <div class="personas-dropdown-content">
                  <div class="dropdown-option" (click)="seleccionarPersona(1)">1 persona</div>
                  <div class="dropdown-option" (click)="seleccionarPersona(2)">2 personas</div>
                  <div class="dropdown-option" (click)="seleccionarPersona(3)">3 personas</div>
                </div>
              </div>

              <!-- Dropdown de Horas -->
              <div class="hora-dropdown">
                <div class="hora-dropdown-container">
                  <button class="hora-dropdown-button" (click)="toggleDropdown('hora')">
                    <i class="fa-regular fa-clock"></i>
                    <span class="arrow">&#9660;</span>
                  </button>
                  <input type="text" class="hora-dropdown-input" placeholder="Hora" [(ngModel)]="horaSeleccionada"
                    name="hora" (blur)="validarHoraSeleccionada()">
                </div>
                <div class="hora-dropdown-content">
                  <div class="dropdown-option" (click)="seleccionarHora('16:00')">16:00 PM</div>
                  <div class="dropdown-option" (click)="seleccionarHora('17:00')">17:00 PM</div>
                  <div class="dropdown-option" (click)="seleccionarHora('18:00')">18:00 PM</div>
                  <div class="dropdown-option" (click)="seleccionarHora('19:00')">19:00 PM</div>
                  <div class="dropdown-option" (click)="seleccionarHora('20:00')">20:00 PM</div>
                  <div class="dropdown-option" (click)="seleccionarHora('21:00')">21:00 PM</div>
                  <div class="dropdown-option" (click)="seleccionarHora('22:00')">22:00 PM</div>
                  <div class="dropdown-option" (click)="seleccionarHora('23:00')">23:00 PM</div>
                </div>
              </div>
            </div>

            <!-- Calendario Date Picker -->
            <div class="calendar-container">
              <input type="text" id="datepicker" class="form-control" placeholder="Selecciona una fecha">
            </div>
          </div>

          <button type="button" class="reserva-btn" (click)="enviarResumenReserva()">Reserva</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Sección del footer-->
  <footer>
    <div class="footer-container">
      <!-- Logo izquierda -->
      <div class="logo">
        <h2>DELICATO <img src="Bandera italia.png" alt="Bandera de italia" /></h2>
        <h3>RESTAURANTE</h3>
      </div>

      <!-- Informacion de contacto -->
      <div class="info-container">
        <div class="contact-info">
          <h4>Dirección</h4>
          <p>Via Umberto I, 2 02043 – Contigliano (Rieti)</p>
        </div>
        <div class="contact-info">
          <h4>EMAIL</h4>
          <p>restaurant&#64;miramar-cambrils.com</p>
          <h4>TELÉFONO</h4>
          <p>+34 977 36 00 63</p>
        </div>
      </div>

      <!-- Redes sociales -->
      <div class="social-container">
        <a href="https://www.instagram.com/ristorantedelicato/" target="_blank"><i
            class="fa-brands fa-instagram"></i></a>
        <a href="https://www.facebook.com/ristorantedelicato" target="_blank"><i
            class="fa-brands fa-facebook-f"></i></a>
      </div>
    </div>

    <div class="footer-bottom">
      <p class="footer-text"><em>Rispetto per il territorio</em></p>
      <p class="rights">Todos los derechos reservados | Delicato&#64;</p>
    </div>
  </footer>

  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasContacto" aria-labelledby="offcanvasContactoLabel">
    <div class="offcanvas-header">
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>

    <div class="offcanvas-body">
      <h1>Horarios</h1>

      <div class="horarios">
        <h4>Miercoles-Viernes</h4>
        <p>3 p.m. - 12 a.m</p>

        <h4>Sabado</h4>
        <p>10:30 a.m - 12 a.m.</p>

        <h4>Domingo</h4>
        <p>10:30 a.m - 3 p.m.</p>
      </div>

      <div class="contact-container">
        <h2>Contacto</h2>
        <div class="Telefono">
          <h4>Teléfono</h4>
          <p>+39 0746249202</p>
          <a href="tel:+390746249202" class="call-button" title="Llamar">
            <div class="icon-container">📞 Llamar</div>
          </a>
        </div>

        <div class="correo">
          <h4>Correo</h4>
          <p>info&#64;ristorantedelicato.it</p>
          <a href="mailto:info&#64;ristorantedelicato.it?subject=Consulta&body=Hola, me gustaría más información."
            class="email-button" title="Enviar correo">
            <div class="icon-container">📧 Enviar</div>
          </a>
        </div>
      </div>

      <div>
        <h4>Dirección</h4>
        <p>Via Umberto I, 2, 02043 Contigliano RI</p>
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d1900.6259912746705!2d12.76524883049025!3d42.40911966870392!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x132f0169f47aa0e5%3A0x8d39707f4b52b82c!2sDELICATO%20%7C%20Ristorante!5e1!3m2!1sit!2sit!4v1742417629730!5m2!1sit!2sit"
          width="300" height="150" style="border: 0" allowfullscreen="" loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </div>
  <script src="js/imagenExpandida.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>